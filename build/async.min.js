!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.async={})}(this,function(n){"use strict";function t(n,t,r){var e=r.length;switch(e){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function r(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function e(n){var t=r(n)?Hn.call(n):"";return t==Un||t==Cn}function u(n){if(r(n)){var t=e(n.valueOf)?n.valueOf():n;n=r(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(Qn,"");var u=Wn.test(n);return u||Gn.test(n)?Jn(n.slice(2),u?2:8):Rn.test(n)?Nn:+n}function i(n){if(!n)return 0===n?n:0;if(n=u(n),n===Kn||n===-Kn){var t=0>n?-1:1;return t*Vn}var r=n%1;return n===n?r?n-r:n:0}function o(n,r){if("function"!=typeof n)throw new TypeError(Xn);return r=Yn(void 0===r?n.length-1:i(r),0),function(){for(var e=arguments,u=-1,i=Yn(e.length-r,0),o=Array(i);++u<i;)o[u]=e[r+u];switch(r){case 0:return n.call(this,o);case 1:return n.call(this,e[0],o);case 2:return n.call(this,e[0],e[1],o)}var c=Array(r+1);for(u=-1;++u<r;)c[u]=e[u];return c[r]=o,t(n,this,c)}}function c(n){return o(function(t,r){var e=o(function(r){var e=this,u=r.pop();return n(t,function(n,t,u){n.apply(e,r.concat([u]))},u)});return r.length?e.apply(this,r):e})}function a(n,t){var r;if("function"!=typeof t)throw new TypeError(Zn);return n=i(n),function(){return--n>0&&(r=t.apply(this,arguments)),1>=n&&(t=void 0),r}}function f(n){return a(2,n)}function l(){}function s(n){return function(t){return null==t?void 0:t[n]}}function p(n){return"number"==typeof n&&n>-1&&n%1==0&&nt>=n}function h(n){return null!=n&&!("function"==typeof n&&e(n))&&p(_n(n))}function y(n,t){return rt.call(n,t)||"object"==typeof n&&t in n&&null===et(n)}function m(n){return ut(Object(n))}function v(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function d(n){return!!n&&"object"==typeof n}function g(n){return d(n)&&h(n)}function k(n){return g(n)&&ct.call(n,"callee")&&(!ft.call(n,"callee")||at.call(n)==it)}function b(n){return"string"==typeof n||!lt(n)&&d(n)&&ht.call(n)==st}function w(n){var t=n?n.length:void 0;return p(t)&&(lt(n)||b(n)||k(n))?v(t,String):null}function E(n,t){return n="number"==typeof n||mt.test(n)?+n:-1,t=null==t?yt:t,n>-1&&n%1==0&&t>n}function S(n){var t=n&&n.constructor,r="function"==typeof t&&t.prototype||vt;return n===r}function j(n){var t=S(n);if(!t&&!h(n))return m(n);var r=w(n),e=!!r,u=r||[],i=u.length;for(var o in n)!y(n,o)||e&&("length"==o||E(o,i))||t&&"constructor"==o||u.push(o);return u}function L(n){var t,r=-1;if(h(n))return t=n.length,function(){return r++,t>r?r:null};var e=j(n);return t=e.length,function(){return r++,t>r?e[r]:null}}function O(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function x(n,t,r){function e(n){o--,n?r(n):null===u&&0>=o&&r(null)}r=f(r||l),n=n||[];for(var u,i=L(n),o=0;null!=(u=i());)o+=1,t(n[u],u,O(e));0===o&&r(null)}function A(n,t,r){function e(){var o=!0;return null===i?r(null):(t(n[i],i,O(function(n){if(n)r(n);else{if(i=u(),null===i)return r(null);o?kt(e):e()}})),void(o=!1))}r=f(r||l),n=n||[];var u=L(n),i=u();e()}function I(n){return o(function(t){var e,u=t.pop();try{e=n.apply(this,t)}catch(i){return u(i)}r(e)&&"function"==typeof e.then?e.then(function(n){u(null,n)})["catch"](function(n){u(n.message?n:new Error(n))}):u(null,e)})}function T(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function z(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function M(n){return function(t,r,e){for(var u=-1,i=Object(t),o=e(t),c=o.length;c--;){var a=o[n?c:++u];if(r(i[a],a,i)===!1)break}return t}}function $(n,t){return n&&Et(n,t,j)}function q(n){return n}function B(n){return"function"==typeof n?n:q}function F(n,t){return n&&$(n,B(t))}function P(n,t,r){for(var e=n.length,u=t+(r?0:-1);r?u--:++u<e;){var i=n[u];if(i!==i)return u}return-1}function U(n,t,r){if(t!==t)return P(n,r);for(var e=r-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function C(n,t,r){var e=n?n.length:0;return e?(r=i(r),0>r&&(r=St(e+r,0)),U(n,t,r)):-1}function D(n,t,r){function e(n){h.unshift(n)}function u(n){var t=C(h,n);t>=0&&h.splice(t,1)}function i(){a--,T(h.slice(),function(n){n()})}"function"==typeof arguments[1]&&(r=t,t=null),r=f(r||l);var c=j(n),a=c.length;if(!a)return r(null);t||(t=a);var s={},p=0,h=[];e(function(){a||r(null,s)}),T(c,function(c){function a(){return t>p&&!y(s,c)&&z(v,function(n){return y(s,n)})}function f(){a()&&(p++,u(f),h[h.length-1](m,s))}for(var l,h=lt(n[c])?n[c]:[n[c]],m=o(function(n,t){if(p--,t.length<=1&&(t=t[0]),n){var e={};F(s,function(n,t){e[t]=n}),e[c]=t,r(n,e)}else s[c]=t,kt(i)}),v=h.slice(0,h.length-1),d=v.length;d--;){if(!(l=n[v[d]]))throw new Error("Has inexistant dependency");if(lt(l)&&C(l,c)>=0)throw new Error("Has cyclic dependencies")}a()?(p++,h[h.length-1](m,s)):e(f)})}function H(n,t){for(var r=-1,e=n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function N(n,t,r){function e(n,t,r,e){if(null!=e&&"function"!=typeof e)throw new Error("task callback must be a function");return n.started=!0,lt(t)||(t=[t]),0===t.length&&n.idle()?kt(function(){n.drain()}):(T(t,function(t){var u={data:t,callback:e||l};r?n.tasks.unshift(u):n.tasks.push(u),n.tasks.length===n.concurrency&&n.saturated()}),void kt(n.process))}function u(n,t){return function(){i-=1;var r=!1,e=arguments;T(t,function(n){T(o,function(t,e){t!==n||r||(o.splice(e,1),r=!0)}),n.callback.apply(n,e)}),n.tasks.length+i===0&&n.drain(),n.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,o=[],c={tasks:[],concurrency:t,payload:r,saturated:l,empty:l,drain:l,started:!1,paused:!1,push:function(n,t){e(c,n,!1,t)},kill:function(){c.drain=l,c.tasks=[]},unshift:function(n,t){e(c,n,!0,t)},process:function(){for(;!c.paused&&i<c.concurrency&&c.tasks.length;){var t=c.payload?c.tasks.splice(0,c.payload):c.tasks.splice(0,c.tasks.length),r=H(t,s("data"));0===c.tasks.length&&c.empty(),i+=1,o.push(t[0]);var e=O(u(c,t));n(r,e)}},length:function(){return c.tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return c.tasks.length+i===0},pause:function(){c.paused=!0},resume:function(){if(c.paused!==!1){c.paused=!1;for(var n=Math.min(c.concurrency,c.tasks.length),t=1;n>=t;t++)kt(c.process)}}};return c}function Q(n,t){return N(n,1,t)}function R(n,t,r,e){A(n,function(n,e,u){r(t,n,function(n,r){t=r,u(n)})},function(n){e(n,t)})}function W(){var n=arguments;return o(function(t){var r=this,e=t[t.length-1];"function"==typeof e?t.pop():e=l,R(n,t,function(n,t,e){t.apply(r,n.concat([o(function(n,t){e(n,t)})]))},function(n,t){e.apply(r,[n].concat(t))})})}function G(){return W.apply(null,jt.call(arguments))}function J(n,t,r,e){var u=[];n(t,function(n,t,e){r(n,function(n,t){u=u.concat(t||[]),e(n)})},function(n){e(n,u)})}function K(n){return function(t,r,e){return n(x,t,r,e)}}function V(n){return function(t,r,e){return n(A,t,r,e)}}function X(n,t,r){return function(e,u,i,o){function c(){o&&o(r(!1,void 0))}function a(n,e,u){return o?void i(n,function(e){o&&t(e)&&(o(r(!0,n)),o=i=!1),u()}):u()}arguments.length>3?n(e,u,a,c):(o=i,i=u,n(e,a,c))}}function Y(n,t){return t}function Z(n){return function(t,r,e){e=f(e||l),t=t||[];var u=L(t);if(0>=n)return e(null);var i=!1,o=0,c=!1;!function a(){if(i&&0>=o)return e(null);for(;n>o&&!c;){var f=u();if(null===f)return i=!0,void(0>=o&&e(null));o+=1,r(t[f],f,O(function(n){o-=1,n?(e(n),c=!0):a()}))}}()}}function _(n,t,r,e){Z(t)(n,r,e)}function nn(n){return o(function(t,r){t.apply(null,r.concat([o(function(t,r){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&T(r,function(t){console[n](t)}))})]))})}function tn(n,t,r){r=r||l;var e=o(function(t,e){t?r(t):(e.push(u),n.apply(this,e))}),u=function(n,u){return n?r(n):u?void t(e):r(null)};n(u)}function rn(n,t,r){var e=0;tn(function(n){return e++<1?n(null,!0):void t.apply(this,arguments)},n,r)}function en(n,t,r){if(r=r||l,!n())return r(null);var e=o(function(u,i){return u?r(u):n.apply(this,i)?t(e):void r.apply(null,[null].concat(i))});t(e)}function un(n,t,r){var e=0;return en(function(){return++e<=1||t.apply(this,arguments)},n,r)}function on(n,t,r){return un(n,function(){return!t.apply(this,arguments)},r)}function cn(n){return function(t,r,e){return n(t,e)}}function an(n,t,r){return x(n,cn(t),r)}function fn(n,t,r,e){return Z(t)(n,cn(r),e)}function ln(n,t,r){return A(n,cn(t),r)}function sn(n){return o(function(t){var r=t.pop(),e=!0;t.push(function(){var n=arguments;e?kt(function(){r.apply(null,n)}):r.apply(null,n)}),n.apply(this,t),e=!1})}function pn(n){return!n}function hn(n,t,r,e){var u=[];n(t,function(n,t,e){r(n,function(r){r&&u.push({index:t,value:n}),e()})},function(){e(H(u.sort(function(n,t){return n.index-t.index}),s("value")))})}function yn(n){return function(t,r,e,u){return n(Z(r),t,e,u)}}function mn(n,t){function r(n){return n?e(n):void u(r)}var e=O(t||l),u=sn(n);r()}function vn(n){function t(r){function e(){return n.length&&n[r].apply(null,arguments),e.next()}return e.next=function(){return r<n.length-1?t(r+1):null},e}return t(0)}function dn(n,t,r,e){e=f(e||l),t=t||[];var u=h(t)?[]:{};n(t,function(n,t,e){r(n,function(n,r){u[t]=r,e(n)})},function(n){e(n,u)})}function gn(n,t){var r={},e={};t=t||q;var u=o(function(u){var i=u.pop(),c=t.apply(null,u);c in r?kt(function(){i.apply(null,r[c])}):c in e?e[c].push(i):(e[c]=[i],n.apply(null,u.concat([o(function(n){r[c]=n;var t=e[c];delete e[c];for(var u=0,i=t.length;i>u;u++)t[u].apply(null,n)})])))});return u.memo=r,u.unmemoized=n,u}function kn(n,t,r){r=r||l;var e=h(t)?[]:{};n(t,function(n,t,r){n(o(function(n,u){u.length<=1&&(u=u[0]),e[t]=u,r(n)}))},function(n){r(n,e)})}function bn(n,t){return kn(x,n,t)}function wn(n,t,r){return kn(Z(t),n,r)}function En(n,t){return N(function(t,r){n(t[0],r)},t,1)}function Sn(n,t){function r(n,t){return n.priority-t.priority}function e(n,t,r){for(var e=-1,u=n.length-1;u>e;){var i=e+(u-e+1>>>1);r(t,n[i])>=0?e=i:u=i-1}return e}function u(n,t,u,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");return n.started=!0,lt(t)||(t=[t]),0===t.length?kt(function(){n.drain()}):void T(t,function(t){var o={data:t,priority:u,callback:"function"==typeof i?i:l};n.tasks.splice(e(n.tasks,o,r)+1,0,o),n.tasks.length===n.concurrency&&n.saturated(),kt(n.process)})}var i=En(n,t);return i.push=function(n,t,r){u(i,n,t,r)},delete i.unshift,i}function jn(n,t,r,e){var u=Nt.call(n).reverse();R(u,t,r,e)}function Ln(n,t,r,e){hn(n,t,function(n,t){r(n,function(n){t(!n)})},e)}function On(n,t){return kn(A,n,t)}function xn(n,t,r){function e(n,t){if("number"==typeof t)n.times=parseInt(t,10)||i;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);n.times=parseInt(t.times,10)||i,n.interval=parseInt(t.interval,10)||o}}function u(n,t){function r(n,r){return function(e){n(function(n,t){e(!n||r,{err:n,result:t})},t)}}function e(n){return function(t){setTimeout(function(){t(null)},n)}}for(;a.times;){var u=!(a.times-=1);c.push(r(a.task,u)),!u&&a.interval>0&&c.push(e(a.interval))}On(c,function(t,r){r=r[r.length-1],(n||a.callback)(r.err,r.result)})}var i=5,o=0,c=[],a={times:i,interval:o},f=arguments.length;if(1>f||f>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=f&&"function"==typeof n&&(r=t,t=n),"function"!=typeof n&&e(a,n),a.callback=r,a.task=t,a.callback?u():u}function An(n,t,r){function e(n,t){var r=n.criteria,e=t.criteria;return e>r?-1:r>e?1:0}Ut(n,function(n,r){t(n,function(t,e){return t?r(t):void r(null,{value:n,criteria:e})})},function(n,t){return n?r(n):void r(null,H(t.sort(e),s("value")))})}function In(n,t,r,e){for(var u=-1,i=Vt(Kt((t-n)/(r||1)),0),o=Array(i);i--;)o[e?i:++u]=n,n+=r;return o}function Tn(n,t,r){Ut(In(0,n,1),t,r)}function zn(n,t,r,e){return Ct(In(0,n,1),t,r,e)}function Mn(n,t,r){Dt(In(0,n,1),t,r)}function $n(n,t,r,e){3===arguments.length&&(e=r,r=t,t=lt(n)?[]:{}),x(n,function(n,e,u){r(t,n,e,u)},function(n){e(n,t)})}function qn(n){return function(){return(n.unmemoized||n).apply(null,arguments)}}function Bn(n,t,r){return en(function(){return!n.apply(this,arguments)},t,r)}function Fn(n,t){function r(n){return o(function(e,u){if(e)t.apply(null,[e].concat(u));else{var i=n.next();i?u.push(r(i)):u.push(t),sn(n).apply(null,u)}})}return t=f(t||l),lt(n)?n.length?void r(vn(n))():t():t(new Error("First argument to waterfall must be an array of functions"))}var Pn,Un="[object Function]",Cn="[object GeneratorFunction]",Dn=Object.prototype,Hn=Dn.toString,Nn=NaN,Qn=/^\s+|\s+$/g,Rn=/^[-+]0x[0-9a-f]+$/i,Wn=/^0b[01]+$/i,Gn=/^0o[0-7]+$/i,Jn=parseInt,Kn=1/0,Vn=1.7976931348623157e308,Xn="Expected a function",Yn=Math.max,Zn="Expected a function",_n=s("length"),nt=9007199254740991,tt=Object.prototype,rt=tt.hasOwnProperty,et=Object.getPrototypeOf,ut=Object.keys,it="[object Arguments]",ot=Object.prototype,ct=ot.hasOwnProperty,at=ot.toString,ft=ot.propertyIsEnumerable,lt=Array.isArray,st="[object String]",pt=Object.prototype,ht=pt.toString,yt=9007199254740991,mt=/^(?:0|[1-9]\d*)$/,vt=Object.prototype,dt=c(x),gt="function"==typeof setImmediate&&setImmediate;Pn=gt?function(n){gt(n)}:"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:function(n){setTimeout(n,0)};var kt=Pn,bt=c(A),wt=o(function(n,t){return o(function(r){return n.apply(null,t.concat(r))})}),Et=M(),St=Math.max,jt=Array.prototype.reverse,Lt=K(J),Ot=V(J),xt=o(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),At=X(x,q,Y),It=X(_,q,Y),Tt=X(A,q,Y),zt=nn("dir"),Mt=X(x,pn,pn),$t=X(_,pn,pn),qt=K(hn),Bt=yn(hn),Ft=V(hn),Pt=nn("log"),Ut=K(dn),Ct=yn(dn),Dt=V(dn),Ht="object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:kt,Nt=Array.prototype.slice,Qt=K(Ln),Rt=yn(Ln),Wt=V(Ln),Gt=X(x,Boolean,q),Jt=X(_,Boolean,q),Kt=Math.ceil,Vt=Math.max,Xt={applyEach:dt,applyEachSeries:bt,apply:wt,asyncify:I,auto:D,cargo:Q,compose:G,concat:Lt,concatSeries:Ot,constant:xt,detect:At,detectLimit:It,detectSeries:Tt,dir:zt,doDuring:rn,doUntil:on,doWhilst:un,during:tn,each:an,eachLimit:fn,eachOf:x,eachOfLimit:_,eachOfSeries:A,eachSeries:ln,ensureAsync:sn,every:Mt,everyLimit:$t,filter:qt,filterLimit:Bt,filterSeries:Ft,forever:mn,iterator:vn,log:Pt,map:Ut,mapLimit:Ct,mapSeries:Dt,memoize:gn,nextTick:Ht,parallel:bn,parallelLimit:wn,priorityQueue:Sn,queue:En,reduce:R,reduceRight:jn,reject:Qt,rejectLimit:Rt,rejectSeries:Wt,retry:xn,seq:W,series:On,setImmediate:kt,some:Gt,someLimit:Jt,sortBy:An,times:Tn,timesLimit:zn,timesSeries:Mn,transform:$n,unmemoize:qn,until:Bn,waterfall:Fn,whilst:en,all:Mt,any:Gt,forEach:an,forEachSeries:ln,forEachLimit:fn,forEachOf:x,forEachOfSeries:A,forEachOfLimit:_,inject:R,foldl:R,foldr:jn,select:qt,selectLimit:Bt,selectSeries:Ft,wrapSync:I};n["default"]=Xt,n.applyEach=dt,n.applyEachSeries=bt,n.apply=wt,n.asyncify=I,n.auto=D,n.cargo=Q,n.compose=G,n.concat=Lt,n.concatSeries=Ot,n.constant=xt,n.detect=At,n.detectLimit=It,n.detectSeries=Tt,n.dir=zt,n.doDuring=rn,n.doUntil=on,n.doWhilst=un,n.during=tn,n.each=an,n.eachLimit=fn,n.eachOf=x,n.eachOfLimit=_,n.eachOfSeries=A,n.eachSeries=ln,n.ensureAsync=sn,n.every=Mt,n.everyLimit=$t,n.filter=qt,n.filterLimit=Bt,n.filterSeries=Ft,n.forever=mn,n.iterator=vn,n.log=Pt,n.map=Ut,n.mapLimit=Ct,n.mapSeries=Dt,n.memoize=gn,n.nextTick=Ht,n.parallel=bn,n.parallelLimit=wn,n.priorityQueue=Sn,n.queue=En,n.reduce=R,n.reduceRight=jn,n.reject=Qt,n.rejectLimit=Rt,n.rejectSeries=Wt,n.retry=xn,n.seq=W,n.series=On,n.setImmediate=kt,n.some=Gt,n.someLimit=Jt,n.sortBy=An,n.times=Tn,n.timesLimit=zn,n.timesSeries=Mn,n.transform=$n,n.unmemoize=qn,n.until=Bn,n.waterfall=Fn,n.whilst=en,n.all=Mt,n.any=Gt,n.forEach=an,n.forEachSeries=ln,n.forEachLimit=fn,n.forEachOf=x,n.forEachOfSeries=A,n.forEachOfLimit=_,n.inject=R,n.foldl=R,n.foldr=jn,n.select=qt,n.selectLimit=Bt,n.selectSeries=Ft,n.wrapSync=I});
//# sourceMappingURL=dist/async.min.map